<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
    <!--<bean id="dataSource" class="org.h2.jdbcx.JdbcDataSource">-->
    <bean id="dataSource" class="com.mysql.jdbc.jdbc2.optional.MysqlDataSource">
        <property name="URL" value="jdbc:mysql://localhost:3306/activiti"/>
        <property name="user" value="root"/>
        <property name="password" value="1234"/>
    </bean>
    <bean id="configurationFactory" class="org.activiti.osgi.blueprint.ConfigurationFactory">
        <property name="dataSource" ref="dataSource"/>
        <property name="databaseSchemaUpdate" value="true"/>
    </bean>
    <bean id="configuration" factory-ref="configurationFactory" factory-method="getConfiguration"/>
    <bean id="processEngineFactory" class="org.activiti.osgi.blueprint.ProcessEngineFactoryWithELResolver"
          init-method="init"
          destroy-method="destroy">
        <property name="processEngineConfiguration"
                  ref="configuration"/>
        <property name="bundle" ref="blueprintBundle"/>
        <property name="blueprintELResolver"
                  ref="blueprintELResolver"/>
    </bean>
    <bean id="processEngine" factory-ref="processEngineFactory"
          factory-method="getObject"/>
    <bean id="runtimeService" factory-ref="processEngine"
          factory-method="getRuntimeService"/>
    <bean id="repositoryService" factory-ref="processEngine"
          factory-method="getRepositoryService"/>
    <bean id="blueprintELResolver"
          class="org.activiti.osgi.blueprint.BlueprintELResolver"/>
    <service ref="processEngine" interface="org.activiti.engine.ProcessEngine"/>
    <service ref="runtimeService"
             interface="org.activiti.engine.RuntimeService"/>
    <service ref="repositoryService"
             interface="org.activiti.engine.RepositoryService"/>
</blueprint>