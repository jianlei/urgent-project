<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
    <!--<bean id="dataSource" class="org.h2.jdbcx.JdbcDataSource">-->
    <bean id="dataSource" class="com.mysql.jdbc.jdbc2.optional.MysqlDataSource">
        <property name="URL" value="jdbc:mysql://localhost:3306/activiti"/>
        <property name="user" value="root"/>
        <property name="password" value="1234"/>
    </bean>

    <bean id="configurationFactory" class="com.daren.workflow.engine.ConfigurationFactory">
        <property name="dataSource" ref="dataSource"/>
        <property name="databaseSchemaUpdate" value="true"/>
        <property name="history" value="full"/>
        <property name="activityFontName" value="微软雅黑" ></property>
        <property name="labelFontName" value="微软雅黑"></property>
    </bean>

    <bean id="configuration" factory-ref="configurationFactory" factory-method="getConfiguration">

    </bean>

    <bean id="processEngineFactory" class="org.activiti.osgi.blueprint.ProcessEngineFactoryWithELResolver"
          init-method="init" destroy-method="destroy">
        <property name="processEngineConfiguration"  ref="configuration"/>
        <property name="bundle" ref="blueprintBundle"/>
        <property name="blueprintELResolver">
            <bean class="org.activiti.osgi.blueprint.BlueprintELResolver"/>
        </property>
    </bean>
    <bean id="processEngine" factory-ref="processEngineFactory" factory-method="getObject"/>
    <!--流程引擎服务-->
    <service interface="org.activiti.engine.ProcessEngine">
        <bean factory-ref="processEngineFactory" factory-method="getObject"/>
    </service>
    <!--Repository服务-->
    <service interface="org.activiti.engine.RepositoryService">
        <bean factory-ref="processEngine" factory-method="getRepositoryService"/>
    </service>
    <!--Runtime服务-->
    <service interface="org.activiti.engine.RuntimeService">
        <bean  factory-ref="processEngine"  factory-method="getRuntimeService"/>
    </service>
    <!--Form服务-->
    <service interface="org.activiti.engine.FormService">
        <bean  factory-ref="processEngine"  factory-method="getFormService"/>
    </service>
    <!--History服务-->
    <service interface="org.activiti.engine.HistoryService">
        <bean  factory-ref="processEngine"  factory-method="getHistoryService"/>
    </service>
    <!--Identity服务-->
    <service interface="org.activiti.engine.IdentityService">
        <bean  factory-ref="processEngine"  factory-method="getIdentityService"/>
    </service>
    <!--Task服务-->
    <service interface="org.activiti.engine.TaskService">
        <bean  factory-ref="processEngine"  factory-method="getTaskService"/>
    </service>

</blueprint>