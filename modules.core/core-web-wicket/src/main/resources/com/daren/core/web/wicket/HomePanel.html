<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">
<wicket:head>
    <meta charset="utf-8"/>
    <title>后台管理系统</title>
    <script type="text/javascript">
        var markers = [];
        var map;
        jQuery(document).ready(function () {
            $("#allmap").height($(".Conframe").height() - 38);
            map = new BMap.Map("allmap");
            map.centerAndZoom("四平市", 15);
            map.enableScrollWheelZoom();
        });
        function parseRescue(gson) {
            map.clearOverlays();
            var jsonObj = eval(gson);
            for (var i = 0; i < jsonObj.length; i++) {
                var point = new BMap.Point(jsonObj[i].longitude, jsonObj[i].latitude);
                var json = {w: 21, h: 35, l: 0, t: 0, x: 6, lb: 5};
                var iconImg = new BMap.Icon("http://localhost:8181/cus/img/dkgreen.png", new BMap.Size(json.w, json.h), {imageOffset: new BMap.Size(-json.l, -json.t), infoWindowOffset: new BMap.Size(json.lb + 5, 1), offset: new BMap.Size(json.x, json.h)});
                var marker = new BMap.Marker(point, {icon: iconImg});
                map.addOverlay(marker);              // 将标注添加到地图中
                markers.push(marker);
                //创建信息窗口
                var infoWindow = new BMap.InfoWindow("救援队名称：" + jsonObj[i].name + "</br>负&nbsp;&nbsp;&nbsp;责&nbsp;&nbsp;&nbsp;人：" + jsonObj[i].head + "</br>负责人电话：" + jsonObj[i].headPhone + "</br>值班&nbsp;&nbsp;&nbsp;电话：" + jsonObj[i].telephone);
                marker.addEventListener("click", function () {
                    this.openInfoWindow(infoWindow);
                });
            }
        }
    </script>

</wicket:head>
<body>
<wicket:panel>
    <div id="toolBar"
         style="border:solid 1px;width:100%;height:38px;overflow: hidden;margin:0;z-index: 90;padding: 9px 0 0 10px;">
        <input class="btn btn-inverse" wicket:id="rescueButton" type="button" value="救援队标注"/>
        <input class="btn btn-inverse" wicket:id="expertsButton" type="button" value="专家标注"/>
    </div>
    <div style="height:2px;"></div>
    <div id="allmap" style="border:solid 1px;width: 100%;overflow: hidden;margin:0;z-index: 90;"></div>
</wicket:panel>
</body>
</html>